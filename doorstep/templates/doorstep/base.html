{% extends "doorstep/skeleton.html" %}

{% load staticfiles %}
{% load pipeline %}
{% load pages_tags %}
{% load cache %}

{% block head %}
{{ block.super }}
<meta name="application-name" content="{{ SITE_NAME }}"/>
<meta name="copyright" content="{{ COPYRIGHT }}"/>
<meta name="description" content="{{ page_description|default:SITE_DESCRIPTION }}"/>
{% block og_meta %}
<meta property="og:site_name" content="{{ SITE_NAME }}"/>
<meta property="og:title" content="{{ page_title|default:SITE_TITLE }} | {{ SITE_NAME }}"/>
<meta property="og:type" content="website"/>
<meta property="og:image" content="{% static 'doorstep/img/icon.png' %}"/>
<meta property="og:description" content="{{ page_description|default:SITE_DESCRIPTION }}"/>
<meta name="author" content="{{ SITE_NAME }}, {{ CONTACT_EMAIL }}"/>
{% endblock %}
<title>{{ page_title|default:SITE_TITLE }} | {{ SITE_NAME }}</title>
<link rel="icon shortcut" href="{% static 'doorstep/img/icon.png' %}" type="image/png"/>

{% block styles %}
<link href="{% static 'doorstep/css/material-icons.css' %}" rel="stylesheet">
<link href="{% static 'doorstep/css/fontawesome-all.min.css' %}" rel="stylesheet">
<link href="{% static 'doorstep/css/materialize.min.css' %}" rel="stylesheet">
{% stylesheet style_name %}
{% endblock %}
{% endblock %}

{% block body %}
{{ block.super }}
<header>
	{% block header-content %}
	<nav class="nav-extended">
		<div class="nav-wrapper">
			{% block header-menu %}
			<div class="left">
				<ul>
					<li>
						<a href="{% url 'catalog_index' %}" class="brand-logo center">{{ SITE_NAME }}</a>
					</li>
					<li>
						<a data-activates="slide-out" class="button-collapse left">
							<i class="fas fa-bars"></i>
						</a>
						<a class="dropdown-button hide-on-med-and-down left" data-activates="menu-dropdown" data-constrainwidth="false" data-alignment="left"
						data-beloworigin="true">
							<i class="fas fa-bars left"></i>
							<span>Menu</span>
						</a>
					</li>
				</ul>
			</div>
			<ul id="menu-dropdown" class="dropdown-content">
					{% block header-menu-list %}
					{% if user.is_authenticated %}
					<li>
						<a class="disabled">Hi {{ user.get_username }}!</a>
					</li>
					<li class="divider"></li>
					<li>
						<a href="{% url 'catalog_index' %}"><i class="fas fa-home"></i>Home</a>
					</li>
					{% if user.is_staff %}
					<li>
						<a href="/admin/">
							<i class="fas fa-wrench"></i>Admin</a>
					</li>
					{% endif %}
					<li>
						<a href="{% url 'accounts_change_password' %}">
							<i class="fas fa-key"></i>Change password</a>
					</li>
					<li>
						<a href="{% url 'accounts_logout' %}">
							<i class="fas fa-sign-out-alt"></i>Sign Out</a>
					</li>
					{% else %}
					<li>
						<a href="{% url 'catalog_index' %}"><i class="fas fa-home"></i>Home</a>
					</li>
					<li>
						<a href="{% url 'accounts_login' %}">
							<i class="fas fa-sign-in-alt"></i>Sign In</a>
					</li>
					<li>
						<a href="{% url 'accounts_register' %}" title="Register to shop faster and better!">
							<i class="fas fa-user-plus"></i>Register</a>
					</li>
					{% endif %}
					{% endblock %}
				</ul>
			{% endblock %}
		</div>

		{% block nav-extended %}
		{% endblock %}
	</nav>

	<ul id="slide-out" class="side-nav">
		{% block side-nav-content %}
		{% if user.is_authenticated %}
		<li>
			<a href="#!name">
				<span class="name">{{ user.get_username }}</span>
			</a>
		</li>
		<li class="divider"></li>
		{% endif %}
		<li>
			<a href="{% url 'catalog_index' %}"><i class="fas fa-home"></i>Home</a>
		</li>
		{% if user.is_authenticated %}
		{% if user.is_staff %}
		<li>
			<a href="/admin/">
			<i class="fas fa-wrench">account_box</i>Admin</a>
		</li>
		{% endif %}
		<li>
			<a href="{% url 'accounts_change_password' %}">
			<i class="fas fa-key"></i>Change password</a>
		</li>
		<li>
			<a href="{% url 'accounts_logout' %}">
			<i class="fas fa-sign-out-alt">eject</i>Sign Out</a>
		</li>
		{% else %}
		<li>
			<a href="{% url 'accounts_login' %}">
			<i class="fas fa-sign-in-alt"></i>Sign In</a>
		</li>
		<li>
			<a href="{% url 'accounts_register' %}" title="Register to shop faster and better!">
			<i class="fas fa-user-plus"></i>Register</a>
		</li>
		{% endif %}
		{% endblock %}
	</ul>
	{% endblock %}
</header>

<main id="content">
	{% block content %}
	{% endblock %}
</main>
<footer>
	{% block footer %}
	{% cache cache_timeout page-links %}
	{% get_pages_links %}
	<div class="copyright">
		<p>
			<span class="statement">{{ COPYRIGHT|safe }}</span> <span class="poweredby">Powered by <a href="https://github.com/mysteryjeans/doorstep">Doorstep</a></span>
		<p>
	</div>
	{% endcache %}
	{% endblock %}
</footer>
{% block scripts %}
<script src="{% static 'doorstep/scripts/jquery.min.js' %}"></script>
<script src="{% static 'doorstep/scripts/materialize.min.js' %}"></script>
{% javascript 'jquery_ajax' %}
<script>
	$('.button-collapse').sideNav();
</script>
{% endblock %}
{% endblock %}
