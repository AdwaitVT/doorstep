{% extends base_template_name %}

{% load cart %}
{% load pipeline %}
{% load cache %}

{% block header-menu %}
{{ block.super }}
<div class="right">
	<ul>
		<li><a><i class="material-icons">shopping_cart</i></a></li>
	</ul>
</div>
{% include "catalog/parts/search_box.html" %}
{% endblock %}

{% with categories=categories %}

{% block nav-extended %}
{{ block.super }}
<ul class="nav-wrapper hide-on-med-and-down">
	{% with template_name="catalog/parts/category_nav.html" %}
	{% for category in categories %}
	{% if category.sub_categories_list %}
	<li>
		<a class="dropdown-button left" data-activates="category-dropdown-{{ category.id }}" data-constrainwidth="false" data-alignment="left" data-beloworigin="true">
			{{ category.name }}
			<i class="material-icons right">arrow_drop_down</i>
		</a>
		<div id="category-dropdown-{{ category.id }}" class="dropdown-content">
			<ul>
				{% for category in category.sub_categories_list %}
				{% include template_name %}
				{% endfor %}
			</ul>
		</div>
	</li>
	{% else %}
	<li>
		<a id="category-id-{{ category.id }}" href="{{ category.get_absolute_url }}">{{ category.name }}</a>
	</li>
	{% endif %}
	{% endfor %}
	{% endwith %}
	<li>
		<a class="dropdown-button left" data-activates="manufacturers-dropdown" data-constrainwidth="false" data-alignment="left" data-beloworigin="true">
			Products
			<i class="material-icons right">arrow_drop_down</i>
		</a>
		<div id="manufacturers-dropdown" class="dropdown-content">
			<ul>
				{% for manufacturer in manufacturers %}
				<li>
					<a href="{{ manufacturer.get_absolute_url }}">{{ manufacturer.name }}</a>
				</li>
				{% endfor %}
			</ul>
		</div>
	</li>
	
</ul>
{% endblock %}

{% block side-nav-content %}
{{ block.super }}
<li class="divider"></li>
<li><a class="subheader">Categories</a></li>
{% with template_name="catalog/parts/category_list.html" %}
{% for category in categories %}
{% include template_name %}
{% empty %}
<li class="info-message-box no-categories-msg">
	There are no categories defined.
</li>
{% endfor %}
{% endwith %}
<li class="divider"></li>
<li><a class="subheader">Manufacturers</a></li>
{% for manufacturer in manufacturers %}
<li>
	<a href="{{ manufacturer.get_absolute_url }}">{{ manufacturer.name }}</a>
</li>
{% endfor %}
{% endblock %}

{% endwith %}

{% block content %}
<div id="catalog-content-container">
	<div id="catalog-bar">
		{% if breadcrumbs %}
		<ul class="breadcrumbs">
			{% for crumb in breadcrumbs %}
			{% if forloop.last %}
			<li>
				{% if crumb.name == 'Home' %}
				<i class="fa fa-home" style="font-size: 1.2em"></i>
				{% else %}
				<span>{{ crumb.name }}</span>
				{% endif %}
			</li>
			{% elif crumb.name == 'Home' %}
			<li>
				<a href="{{ crumb.url }}" title="Go to {{ crumb.name }}" ><i class="fa fa-home" style="font-size: 1.2em; text-decoration: none;"></i></a>
			</li>
			{% else %}
			<li>
				<a href="{{ crumb.url }}" title="Go to {{ crumb.name }}" >{{ crumb.name }}</a>
			</li>
			{% endif %}
			{% endfor %}
		</ul>
		{% endif %}
		<div class="cart-basket">
			<div id="basket-container" onclick="javascript:$('.basket-items', this).fadeIn('fast');">
				{% cart_basket %}
			</div>
			<form method="post" action="{% url 'catalog_change_currency' %}" class="currencies">
				{% csrf_token %}
				<input type="hidden" name="next" value="{{ request.get_full_path }}" />
				<select name="default_currency" class="currencies" onchange="javascript:$(this).closest('form').submit();">
					{% for currency in currencies %}
					<option value="{{ currency.code }}" {% if default_currency.code == currency.code %}selected="selected"{% endif %}>{{ currency.code }}</option>
					{% endfor %}
				</select>
			</form>
			<br/>
		</div>
	</div>
	<div id="catalog-content">
		{% block catalog-content %}
		{% endblock %}
	</div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
{% javascript 'catalog_base' %}
{% endblock %}
